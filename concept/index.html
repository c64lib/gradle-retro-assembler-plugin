<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Retro Assembler build tools</title>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */

@import url("//fonts.googleapis.com/css?family=Noto+Sans:300,600italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700");
@import url(https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css); /* Default asciidoc style framework - important */

/* CUSTOMISATIONS */
/* Change the values in root for quick customisation. If you want even more fine grain... venture further. */

:root{
--maincolor:#FFFFFF;
--primarycolor:#2c3e50;
--secondarycolor:#ba3925;
--tertiarycolor: #186d7a;
--sidebarbackground:#CCC;
--linkcolor:#b71c1c;
--linkcoloralternate:#f44336;
--white:#FFFFFF;
--black:#000000;
}

/* Text styles */
h1{color:var(--primarycolor) !important;}
h2,h3,h4,h5,h6{color:var(--secondarycolor) !important;}
.title{color:var(--tertiarycolor) !important; font-family:"Noto Sans",sans-serif !important;font-style: normal !important; font-weight: normal !important;}
p{font-family: "Noto Sans",sans-serif !important}

/* Table styles */
th{font-family: "Noto Sans",sans-serif !important}

/* Responsiveness fixes */
video {
  max-width: 100%;
}

@media all and (max-width: 600px) {
table {
  width: 55vw!important;
  font-size: 3vw;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Retro Assembler build tools</h1>
<div class="details">
<span id="revnumber">version 1.8.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a>
<ul class="sectlevel2">
<li><a href="#_retro_assembler_project_model">1.1. Retro assembler project model</a></li>
</ul>
</li>
<li><a href="#_processes">2. Processes</a>
<ul class="sectlevel2">
<li><a href="#_simple_assembling_process">2.1. Simple assembling process</a></li>
<li><a href="#_resolving_external_dependencies">2.2. Resolving external dependencies</a></li>
<li><a href="#_converting_resource_files_into_assembly">2.3. Converting resource files into assembly</a></li>
</ul>
</li>
<li><a href="#_requirements">3. Requirements</a>
<ul class="sectlevel2">
<li><a href="#_system_requirements">3.1. System Requirements</a></li>
<li><a href="#_external_dependencies">3.2. External Dependencies</a></li>
<li><a href="#_resource_processors">3.3. Resource Processors</a></li>
<li><a href="#_cicd_requirements">3.4. CI/CD Requirements</a></li>
</ul>
</li>
<li><a href="#_architecture">4. Architecture</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This document is under development!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This is initial concept paper of Retro Build Tool - an automation device to build various 8-bit targeted assembly projects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">1. Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_retro_assembler_project_model">1.1. Retro assembler project model</h3>
<div class="paragraph">
<p>The source model of any retro assembler (MOS 6502 based) project is very simplified.
There is no interim form of compilation process and there is no linker.
The only means to reuse shared code is to use import directive therefore for the project it is sufficient to know all entry point files and assembly them one by one into executables (i.e. PRG files).
All internal dependencies are specified within source files.
All external dependencies must be handled externally (via retro assembler build tool).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/domain-asm-project-model.svg" alt="domain asm project model"></span></p>
</div>
<div class="paragraph">
<p>There are other kind of files kept in the project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>data files of Charpad or similar software for developing tiled-based backgrounds,</p>
</li>
<li>
<p>data files of Spritepad or similar software for developing sprites,</p>
</li>
<li>
<p>source files of GoatTracker for SID music sources,</p>
</li>
<li>
<p>plain images in any format to be displayed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All these files should be kept in source form and then convert via processors to embeddable form (i.e. binary).
It should be possible to compress binary form if needed, i.e. via Exomizer.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="img/domain-processors.svg" alt="domain processors"></span></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_processes">2. Processes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_simple_assembling_process">2.1. Simple assembling process</h3>
<div class="paragraph">
<p>In its simplest form we take a single <code>asm</code> file (an entry file) and compile it with Assembler (i.e. with KickAssembler) to get an output file (in this case this is an executable <code>prg</code> file).
There can be plenty of additional files that are included implicitly to the entry file via <code>import</code> directive.
For these "includes" files no separate output files are generated.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/process-simple-assembling.svg" alt="process simple assembling">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resolving_external_dependencies">2.2. Resolving external dependencies</h3>
<div class="paragraph">
<p>Include files can be delivered as external dependencies.
In this case these dependencies must be resolved before assembling.
Resolving usually means: downloading them into some volatile place to enable contained <code>asm</code> files to be included by project sources.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/process-assembling-deps.svg" alt="process assembling deps">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_converting_resource_files_into_assembly">2.3. Converting resource files into assembly</h3>
<div class="paragraph">
<p>Third party software can be used to produce meaningful resources such as graphical or musical data.
These resources require further processing in order to be embedded into the assembly program.
Dedicated processors can be used to accomplish this conversion task.
These processors produce <code>asm</code> files that can be included into the main program.
Alternatively, processors can produce binary data that can also be embedded into assembly as data blocks.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/process-converter.svg" alt="process converter">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_requirements">3. Requirements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_system_requirements">3.1. System Requirements</h3>
<div class="sect3">
<h4 id="_java_runtime">3.1.1. Java Runtime</h4>
<div class="paragraph">
<p>The Build Tool requires Java 11 or higher to run.
It is compatible with all operating systems that support Java (Windows, macOS, Linux).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_external_dependencies">3.2. External Dependencies</h3>
<div class="paragraph">
<p>Gradle Retro Assembler Plugin depends on several external native tools that must be installed and available on the system <code>PATH</code>.
These tools are used by various processors to perform specialized tasks.</p>
</div>
<div class="sect3">
<h4 id="_required_for_assembly">3.2.1. Required for Assembly</h4>
<div class="sect4">
<h5 id="_kickassembler">KickAssembler</h5>
<div class="paragraph">
<p>KickAssembler is the primary assembler dialect supported by the plugin.
It must be downloaded and installed.
The plugin can automatically download and manage KickAssembler versions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Version</dt>
<dd>
<p>5.25 or higher (recommended)</p>
</dd>
<dt class="hdlist1">Installation</dt>
<dd>
<p>Automatic via plugin (recommended) or manual download from <a href="https://www.kickassembler.com/" class="bare">https://www.kickassembler.com/</a></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optional_for_processors">3.2.2. Optional for Processors</h4>
<div class="paragraph">
<p>The following tools are only required if you use the corresponding processors:</p>
</div>
<div class="sect4">
<h5 id="_vice_emulator">VICE Emulator</h5>
<div class="paragraph">
<p>Required for running KickAssembler-based unit tests using the 64spec framework.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Version</dt>
<dd>
<p>3.7 or higher</p>
</dd>
<dt class="hdlist1">Installation</dt>
<dd>
<p>Available at <a href="https://vice-emu.sourceforge.io/" class="bare">https://vice-emu.sourceforge.io/</a></p>
</dd>
<dt class="hdlist1">Environment</dt>
<dd>
<p>Must be available on system <code>PATH</code> as <code>x64sc</code> or <code>x64</code> command</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_exomizer">Exomizer</h5>
<div class="paragraph">
<p>A file cruncher/packer that can be integrated into build pipelines.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Version</dt>
<dd>
<p>Latest stable recommended</p>
</dd>
<dt class="hdlist1">Installation</dt>
<dd>
<p>Available at <a href="https://github.com/Kroc/exomizer" class="bare">https://github.com/Kroc/exomizer</a></p>
</dd>
<dt class="hdlist1">Usage</dt>
<dd>
<p>Used with <code>commandStep</code> in Pipeline DSL or custom build scripts</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_goattracker_2">GoatTracker 2</h5>
<div class="paragraph">
<p>Music editor and SID file generator for Commodore 64 sound compositions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Version</dt>
<dd>
<p>2.x (latest recommended)</p>
</dd>
<dt class="hdlist1">Installation</dt>
<dd>
<p>Available at <a href="https://www.jammer2000.co.uk/goat/" class="bare">https://www.jammer2000.co.uk/goat/</a></p>
</dd>
<dt class="hdlist1">Environment</dt>
<dd>
<p><code>gt2reloc</code> command must be available on system <code>PATH</code></p>
</dd>
<dt class="hdlist1">Dependencies</dt>
<dd>
<p>Required for GoatTracker processor (both traditional preprocessor and Pipeline DSL)</p>
</dd>
<dt class="hdlist1">Features</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Convert Goat Tracker SNG format to SID format</p>
</li>
<li>
<p>Support for SFX, buffered writes, and various optimizations</p>
</li>
<li>
<p>Embeddable in assembly programs</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>GoatTracker processor support is experimental in version 1.8.0.
The syntax and behavior may change in future releases.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_resource_processors">3.3. Resource Processors</h3>
<div class="paragraph">
<p>These processors are intended for asset management and transformation.</p>
</div>
<div class="sect3">
<h4 id="_charpad_converter">3.3.1. Charpad Converter</h4>
<div class="paragraph">
<p>Converts CharPad project files (CTM format) into binary and assembly outputs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>charset data (character definitions),</p>
</li>
<li>
<p>charset attributes, colours, and screen colours,</p>
</li>
<li>
<p>tile sets and tile-related data,</p>
</li>
<li>
<p>maps and map sections,</p>
</li>
<li>
<p>CTM file metadata in assembly format.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported CTM Versions</dt>
<dd>
<p>5, 6, 7, 8, 9</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_spritepad_converter">3.3.2. Spritepad Converter</h4>
<div class="paragraph">
<p>Converts SpritePad project files (SPD format) into sprite binary data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>sprite definitions (up to 64 bytes per sprite),</p>
</li>
<li>
<p>sprite attributes.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Supported SPD Versions</dt>
<dd>
<p>4, 5</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Animation and color export are not currently supported.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_goattracker_converter">3.3.3. GoatTracker Converter</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Experimental feature in version 1.8.0.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Converts GoatTracker SNG music files into embeddable SID format:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SID music data with configurable optimizations,</p>
</li>
<li>
<p>optional sound effects support,</p>
</li>
<li>
<p>optional zero page buffering for enhanced quality.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_image_converter">3.3.4. Image Converter</h4>
<div class="paragraph">
<p>Processes standard image formats (PNG, etc.) into binary data suitable for C64 programs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generic_processors">3.3.5. Generic Processors</h4>
<div class="paragraph">
<p>These processors can be used at any stage of the build process.</p>
</div>
<div class="sect4">
<h5 id="_cruncherpacker">Cruncher/Packer</h5>
<div class="paragraph">
<p>Data compression processors such as Exomizer that reduce program size.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cicd_requirements">3.4. CI/CD Requirements</h3>
<div class="paragraph">
<p>For continuous integration environments (CircleCI, TravisCI), additional tools may be available:</p>
</div>
<div class="sect3">
<h4 id="_circleci">3.4.1. CircleCI</h4>
<div class="paragraph">
<p>The official Docker image <code>maciejmalecki/c64libci:0.1.7</code> includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java 11+</p>
</li>
<li>
<p>Gradle</p>
</li>
<li>
<p>KickAssembler</p>
</li>
<li>
<p>VICE 3.x</p>
</li>
<li>
<p>GoatTracker 2</p>
</li>
<li>
<p>Exomizer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>No additional setup required when using this image.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">4. Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tool is following a hexagonal architecture principle that is depicted on the following picture.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/overall-hexagon.svg" alt="overall hexagon">
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.8.0<br>
Last updated 2025-11-09 19:29:46 UTC
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/assembly.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>